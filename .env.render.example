# n8n-MCP Configuration for Render.com Deployment
# Copy this to your Render service environment variables

# ====================
# REQUIRED CONFIGURATION
# ====================

# Server Mode - MUST be http for Render deployment
MCP_MODE=http

# Use fixed HTTP implementation for stability on Render
USE_FIXED_HTTP=true

# Logging Level
LOG_LEVEL=info

# Server binding - MUST be 0.0.0.0 for Render
HOST=0.0.0.0

# Port - Render will set this automatically, but can be overridden
# PORT=3000

# CORS Configuration - Allow all origins or specify your domain
CORS_ORIGIN=*

# Trust proxy headers from Render's load balancer
TRUST_PROXY=1

# Environment
NODE_ENV=production

# Don't rebuild database on startup (use pre-built database)
REBUILD_ON_START=false

# ====================
# SECURITY CONFIGURATION
# ====================

# Authentication Token - GENERATE A SECURE TOKEN!
# Use: openssl rand -base64 32
# Or let Render generate one automatically
AUTH_TOKEN=your-secure-generated-token-here

# ====================
# N8N API CONFIGURATION (OPTIONAL)
# ====================
# Enable these to allow workflow management from Claude

# Your n8n instance URL (without /api/v1 suffix)
# Examples:
# N8N_API_URL=https://your-n8n.example.com
# N8N_API_URL=https://n8n-production-123.railway.app

# Your n8n API Key (get from Settings > API in n8n)
# N8N_API_KEY=n8n_api_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Optional: n8n host for webhook URLs
# N8N_HOST=your-n8n.example.com

# Optional: Webhook tunnel URL if using ngrok/localtunnel
# WEBHOOK_TUNNEL_URL=https://abc123.ngrok.io

# Optional: n8n protocol (http or https)
# N8N_PROTOCOL=https

# ====================
# ADVANCED CONFIGURATION
# ====================

# Database path (use default for Render persistent disk)
NODE_DB_PATH=/app/data/nodes.db

# API timeout and retries
N8N_API_TIMEOUT=30000
N8N_API_MAX_RETRIES=3

# MCP Server Configuration
MCP_SERVER_PORT=3000
MCP_SERVER_HOST=localhost

# Base URL (auto-detected on Render, usually not needed)
# BASE_URL=https://your-service.onrender.com

# ====================
# RENDER-SPECIFIC NOTES
# ====================
# 
# 1. AUTH_TOKEN: Set to "Generate value" in Render dashboard for auto-generation
# 2. PORT: Automatically set by Render, don't override unless needed
# 3. N8N_API_URL: Point to your n8n instance (Railway, self-hosted, etc.)
# 4. Persistent disk: Automatically mounted at /app/data for database storage
# 5. Health check: Available at /health endpoint
# 6. Logs: Available in Render dashboard and via curl https://your-service.onrender.com/logs
#
# Render will automatically inject some environment variables:
# - RENDER=true
# - RENDER_SERVICE_ID=srv-xxx
# - RENDER_SERVICE_NAME=your-service-name
# - RENDER_EXTERNAL_URL=https://your-service.onrender.com